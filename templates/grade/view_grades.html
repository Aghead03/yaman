{% extends "base.html" %}
{% load grade_filters %}
{% block content %}
    <div class="module-header">
        <h2>إدارة العلامات - {{ classroom.name }} / {{ subject.name }}</h2>
        <div class="float-right">
            <a href="{% url 'grade:edit_grades' classroom.id subject.id %}" class="btn btn-primary">
                تعديل العلامات
            </a>
            <a href="{% url 'grade:select_subject' classroom.id %}" class="btn btn-secondary">
                العودة للمواد
            </a>
            <a href="{% url 'grade:dashboard' %}" class="btn btn-secondary">
                العودة للقائمة
            </a>
        </div>
    </div>
    <div class="table-responsive">
        <table class="table table-bordered">
            <thead class="thead-dark">
                <tr>
                    <th>اسم الطالب</th>
                    <th>نشاط</th>
                    <th>شهري</th>
                    <th>نصفي</th>
                    <th>نهائي</th>
                    <th>ملاحظات</th>
                </tr>
            </thead>
            <tbody>
                {% regroup grades by student as student_grades %}
                {% for student in student_grades %}
                <tr>
                    <td>{{ student.grouper.full_name }}</td>
                    <td>{{ student.list|get_grade:'activity' }}</td>
                    <td>{{ student.list|get_grade:'monthly' }}</td>
                    <td>{{ student.list|get_grade:'midterm' }}</td>
                    <td>{{ student.list|get_grade:'final' }}</td>
                    <td>{{ student.list.0.notes }}</td>
                </tr>
                {% endfor %}
            </tbody>
        </table>
    </div>
{% endblock %}